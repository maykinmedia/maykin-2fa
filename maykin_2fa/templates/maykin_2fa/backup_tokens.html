{% extends "admin/base_site.html" %}
{% load static i18n %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "admin/css/login.css" %}">
    <link rel="stylesheet" href="{% static "maykin_2fa/css/fixes.css" %}">
    {{ form.media }}
{% endblock %}

{% block bodyclass %}{{ block.super }} login{% endblock %}

{% block usertools %}{% endblock %}
{% block nav-global %}{% endblock %}
{% block nav-sidebar %}{% endblock %}
{% block content_title %}{% endblock %}
{% block nav-breadcrumbs %}{% endblock %}

{# Django 4.2 #}
{% block branding %}
<h1 id="site-name"><a href="#">{{ title }}</a></h1>
{% endblock %}

{% block content %}
    <p>{% blocktrans trimmed %}
        Backup tokens can be used if you have lost access to your second factor
        device(s). The backup tokens below can be used for login verification. If
        you've used up all your backup tokens, you can generate a new set. Only the
        backup tokens shown below will be valid.
    {% endblocktrans %}</p>

    {% if device.token_set.all %}
        <ul class="backup-tokens-list">
            {% for token in device.token_set.all %}
                <li>
                    <code>{{ token.token }}</code>
                </li>
            {% endfor %}
        </ul>
        <p>
            {% blocktrans trimmed %}Print these tokens and keep them somewhere safe.{% endblocktrans %}
        </p>
        <p>{% blocktrans trimmed %}
            If you generate tokens again, they will replace the existing tokens.
        {% endblocktrans %}</p>
    {% else %}
        <p>{% trans "⚠️ You don't have any backup codes yet." %}</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        {% comment %}

        <a href="{% url 'two_factor:profile'%}" class="float-right btn btn-link">
            {% trans "Back to Account Security" %}
        </a>
        {% endcomment %}
        <div class="submit-row">
            <div class="actions-buttons">
                <button class="button button--padded" type="submit">
                    {% trans "Generate tokens" %}
                </button>
            </div>
        </div>

        <div class="submit-row">
            <a href="{% url 'admin:index' %}">
                {% trans "Go to admin" %}
            </a>
        </div>
    </form>
{% endblock %}
